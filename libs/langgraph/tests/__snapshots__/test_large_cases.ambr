# serializer version: 1
# name: test_conditional_state_graph[memory]
  '{"$defs": {"AgentAction": {"description": "Represents a request to execute an action by an agent.\\n\\nThe action consists of the name of the tool to execute and the input to pass\\nto the tool. The log is used to pass along extra information about the action.", "properties": {"tool": {"title": "Tool", "type": "string"}, "tool_input": {"anyOf": [{"type": "string"}, {"additionalProperties": true, "type": "object"}], "title": "Tool Input"}, "log": {"title": "Log", "type": "string"}, "type": {"const": "AgentAction", "default": "AgentAction", "title": "Type", "type": "string"}}, "required": ["tool", "tool_input", "log"], "title": "AgentAction", "type": "object"}, "AgentFinish": {"description": "Final return value of an ActionAgent.\\n\\nAgents return an AgentFinish when they have reached a stopping condition.", "properties": {"return_values": {"additionalProperties": true, "title": "Return Values", "type": "object"}, "log": {"title": "Log", "type": "string"}, "type": {"const": "AgentFinish", "default": "AgentFinish", "title": "Type", "type": "string"}}, "required": ["return_values", "log"], "title": "AgentFinish", "type": "object"}}, "properties": {"input": {"title": "Input", "type": "string"}, "agent_outcome": {"anyOf": [{"$ref": "#/$defs/AgentAction"}, {"$ref": "#/$defs/AgentFinish"}, {"type": "null"}], "title": "Agent Outcome"}, "intermediate_steps": {"items": {"maxItems": 2, "minItems": 2, "prefixItems": [{"$ref": "#/$defs/AgentAction"}, {"type": "string"}], "type": "array"}, "title": "Intermediate Steps", "type": "array"}}, "title": "AgentState", "type": "object"}'
# ---
# name: test_conditional_state_graph[memory].1
  '{"$defs": {"AgentAction": {"description": "Represents a request to execute an action by an agent.\\n\\nThe action consists of the name of the tool to execute and the input to pass\\nto the tool. The log is used to pass along extra information about the action.", "properties": {"tool": {"title": "Tool", "type": "string"}, "tool_input": {"anyOf": [{"type": "string"}, {"additionalProperties": true, "type": "object"}], "title": "Tool Input"}, "log": {"title": "Log", "type": "string"}, "type": {"const": "AgentAction", "default": "AgentAction", "title": "Type", "type": "string"}}, "required": ["tool", "tool_input", "log"], "title": "AgentAction", "type": "object"}, "AgentFinish": {"description": "Final return value of an ActionAgent.\\n\\nAgents return an AgentFinish when they have reached a stopping condition.", "properties": {"return_values": {"additionalProperties": true, "title": "Return Values", "type": "object"}, "log": {"title": "Log", "type": "string"}, "type": {"const": "AgentFinish", "default": "AgentFinish", "title": "Type", "type": "string"}}, "required": ["return_values", "log"], "title": "AgentFinish", "type": "object"}}, "properties": {"input": {"title": "Input", "type": "string"}, "agent_outcome": {"anyOf": [{"$ref": "#/$defs/AgentAction"}, {"$ref": "#/$defs/AgentFinish"}, {"type": "null"}], "title": "Agent Outcome"}, "intermediate_steps": {"items": {"maxItems": 2, "minItems": 2, "prefixItems": [{"$ref": "#/$defs/AgentAction"}, {"type": "string"}], "type": "array"}, "title": "Intermediate Steps", "type": "array"}}, "title": "AgentState", "type": "object"}'
# ---
# name: test_conditional_state_graph[memory].2
  '''
  {
    "nodes": [
      {
        "id": "__start__",
        "type": "runnable",
        "data": {
          "id": [
            "langgraph",
            "_internal",
            "_runnable",
            "RunnableCallable"
          ],
          "name": "__start__"
        }
      },
      {
        "id": "agent",
        "type": "runnable",
        "data": {
          "id": [
            "langchain",
            "schema",
            "runnable",
            "RunnableSequence"
          ],
          "name": "agent"
        }
      },
      {
        "id": "tools",
        "type": "runnable",
        "data": {
          "id": [
            "langgraph",
            "_internal",
            "_runnable",
            "RunnableCallable"
          ],
          "name": "tools"
        }
      },
      {
        "id": "__end__"
      }
    ],
    "edges": [
      {
        "source": "__start__",
        "target": "agent"
      },
      {
        "source": "agent",
        "target": "__end__",
        "data": "exit",
        "conditional": true
      },
      {
        "source": "agent",
        "target": "tools",
        "data": "continue",
        "conditional": true
      },
      {
        "source": "tools",
        "target": "agent"
      }
    ]
  }
  '''
# ---
# name: test_conditional_state_graph[memory].3
  '''
  graph TD;
  	__start__ --> agent;
  	agent -. &nbsp;exit&nbsp; .-> __end__;
  	agent -. &nbsp;continue&nbsp; .-> tools;
  	tools --> agent;
  
  '''
# ---
# name: test_message_graph[memory]
  '{"$defs": {"AIMessage": {"additionalProperties": true, "description": "Message from an AI.\\n\\nAIMessage is returned from a chat model as a response to a prompt.\\n\\nThis message represents the output of the model and consists of both\\nthe raw output as returned by the model together standardized fields\\n(e.g., tool calls, usage metadata) added by the LangChain framework.", "properties": {"content": {"anyOf": [{"type": "string"}, {"items": {"anyOf": [{"type": "string"}, {"additionalProperties": true, "type": "object"}]}, "type": "array"}], "title": "Content"}, "additional_kwargs": {"additionalProperties": true, "title": "Additional Kwargs", "type": "object"}, "response_metadata": {"additionalProperties": true, "title": "Response Metadata", "type": "object"}, "type": {"const": "ai", "default": "ai", "title": "Type", "type": "string"}, "name": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Name"}, "id": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Id"}, "example": {"default": false, "title": "Example", "type": "boolean"}, "tool_calls": {"default": [], "items": {"$ref": "#/$defs/ToolCall"}, "title": "Tool Calls", "type": "array"}, "invalid_tool_calls": {"default": [], "items": {"$ref": "#/$defs/InvalidToolCall"}, "title": "Invalid Tool Calls", "type": "array"}, "usage_metadata": {"anyOf": [{"$ref": "#/$defs/UsageMetadata"}, {"type": "null"}], "default": null}}, "required": ["content"], "title": "AIMessage", "type": "object"}, "AIMessageChunk": {"additionalProperties": true, "description": "Message chunk from an AI.", "properties": {"content": {"anyOf": [{"type": "string"}, {"items": {"anyOf": [{"type": "string"}, {"additionalProperties": true, "type": "object"}]}, "type": "array"}], "title": "Content"}, "additional_kwargs": {"additionalProperties": true, "title": "Additional Kwargs", "type": "object"}, "response_metadata": {"additionalProperties": true, "title": "Response Metadata", "type": "object"}, "type": {"const": "AIMessageChunk", "default": "AIMessageChunk", "title": "Type", "type": "string"}, "name": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Name"}, "id": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Id"}, "example": {"default": false, "title": "Example", "type": "boolean"}, "tool_calls": {"default": [], "items": {"$ref": "#/$defs/ToolCall"}, "title": "Tool Calls", "type": "array"}, "invalid_tool_calls": {"default": [], "items": {"$ref": "#/$defs/InvalidToolCall"}, "title": "Invalid Tool Calls", "type": "array"}, "usage_metadata": {"anyOf": [{"$ref": "#/$defs/UsageMetadata"}, {"type": "null"}], "default": null}, "tool_call_chunks": {"default": [], "items": {"$ref": "#/$defs/ToolCallChunk"}, "title": "Tool Call Chunks", "type": "array"}}, "required": ["content"], "title": "AIMessageChunk", "type": "object"}, "ChatMessage": {"additionalProperties": true, "description": "Message that can be assigned an arbitrary speaker (i.e. role).", "properties": {"content": {"anyOf": [{"type": "string"}, {"items": {"anyOf": [{"type": "string"}, {"additionalProperties": true, "type": "object"}]}, "type": "array"}], "title": "Content"}, "additional_kwargs": {"additionalProperties": true, "title": "Additional Kwargs", "type": "object"}, "response_metadata": {"additionalProperties": true, "title": "Response Metadata", "type": "object"}, "type": {"const": "chat", "default": "chat", "title": "Type", "type": "string"}, "name": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Name"}, "id": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Id"}, "role": {"title": "Role", "type": "string"}}, "required": ["content", "role"], "title": "ChatMessage", "type": "object"}, "ChatMessageChunk": {"additionalProperties": true, "description": "Chat Message chunk.", "properties": {"content": {"anyOf": [{"type": "string"}, {"items": {"anyOf": [{"type": "string"}, {"additionalProperties": true, "type": "object"}]}, "type": "array"}], "title": "Content"}, "additional_kwargs": {"additionalProperties": true, "title": "Additional Kwargs", "type": "object"}, "response_metadata": {"additionalProperties": true, "title": "Response Metadata", "type": "object"}, "type": {"const": "ChatMessageChunk", "default": "ChatMessageChunk", "title": "Type", "type": "string"}, "name": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Name"}, "id": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Id"}, "role": {"title": "Role", "type": "string"}}, "required": ["content", "role"], "title": "ChatMessageChunk", "type": "object"}, "FunctionMessage": {"additionalProperties": true, "description": "Message for passing the result of executing a tool back to a model.\\n\\nFunctionMessage are an older version of the ToolMessage schema, and\\ndo not contain the tool_call_id field.\\n\\nThe tool_call_id field is used to associate the tool call request with the\\ntool call response. This is useful in situations where a chat model is able\\nto request multiple tool calls in parallel.", "properties": {"content": {"anyOf": [{"type": "string"}, {"items": {"anyOf": [{"type": "string"}, {"additionalProperties": true, "type": "object"}]}, "type": "array"}], "title": "Content"}, "additional_kwargs": {"additionalProperties": true, "title": "Additional Kwargs", "type": "object"}, "response_metadata": {"additionalProperties": true, "title": "Response Metadata", "type": "object"}, "type": {"const": "function", "default": "function", "title": "Type", "type": "string"}, "name": {"title": "Name", "type": "string"}, "id": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Id"}}, "required": ["content", "name"], "title": "FunctionMessage", "type": "object"}, "FunctionMessageChunk": {"additionalProperties": true, "description": "Function Message chunk.", "properties": {"content": {"anyOf": [{"type": "string"}, {"items": {"anyOf": [{"type": "string"}, {"additionalProperties": true, "type": "object"}]}, "type": "array"}], "title": "Content"}, "additional_kwargs": {"additionalProperties": true, "title": "Additional Kwargs", "type": "object"}, "response_metadata": {"additionalProperties": true, "title": "Response Metadata", "type": "object"}, "type": {"const": "FunctionMessageChunk", "default": "FunctionMessageChunk", "title": "Type", "type": "string"}, "name": {"title": "Name", "type": "string"}, "id": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Id"}}, "required": ["content", "name"], "title": "FunctionMessageChunk", "type": "object"}, "HumanMessage": {"additionalProperties": true, "description": "Message from a human.\\n\\nHumanMessages are messages that are passed in from a human to the model.\\n\\nExample:\\n\\n    .. code-block:: python\\n\\n        from langchain_core.messages import HumanMessage, SystemMessage\\n\\n        messages = [\\n            SystemMessage(\\n                content=\\"You are a helpful assistant! Your name is Bob.\\"\\n            ),\\n            HumanMessage(\\n                content=\\"What is your name?\\"\\n            )\\n        ]\\n\\n        # Instantiate a chat model and invoke it with the messages\\n        model = ...\\n        print(model.invoke(messages))", "properties": {"content": {"anyOf": [{"type": "string"}, {"items": {"anyOf": [{"type": "string"}, {"additionalProperties": true, "type": "object"}]}, "type": "array"}], "title": "Content"}, "additional_kwargs": {"additionalProperties": true, "title": "Additional Kwargs", "type": "object"}, "response_metadata": {"additionalProperties": true, "title": "Response Metadata", "type": "object"}, "type": {"const": "human", "default": "human", "title": "Type", "type": "string"}, "name": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Name"}, "id": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Id"}, "example": {"default": false, "title": "Example", "type": "boolean"}}, "required": ["content"], "title": "HumanMessage", "type": "object"}, "HumanMessageChunk": {"additionalProperties": true, "description": "Human Message chunk.", "properties": {"content": {"anyOf": [{"type": "string"}, {"items": {"anyOf": [{"type": "string"}, {"additionalProperties": true, "type": "object"}]}, "type": "array"}], "title": "Content"}, "additional_kwargs": {"additionalProperties": true, "title": "Additional Kwargs", "type": "object"}, "response_metadata": {"additionalProperties": true, "title": "Response Metadata", "type": "object"}, "type": {"const": "HumanMessageChunk", "default": "HumanMessageChunk", "title": "Type", "type": "string"}, "name": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Name"}, "id": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Id"}, "example": {"default": false, "title": "Example", "type": "boolean"}}, "required": ["content"], "title": "HumanMessageChunk", "type": "object"}, "InputTokenDetails": {"description": "Breakdown of input token counts.\\n\\nDoes *not* need to sum to full input token count. Does *not* need to have all keys.\\n\\nExample:\\n\\n    .. code-block:: python\\n\\n        {\\n            \\"audio\\": 10,\\n            \\"cache_creation\\": 200,\\n            \\"cache_read\\": 100,\\n        }\\n\\n.. versionadded:: 0.3.9\\n\\nMay also hold extra provider-specific keys.", "properties": {"audio": {"title": "Audio", "type": "integer"}, "cache_creation": {"title": "Cache Creation", "type": "integer"}, "cache_read": {"title": "Cache Read", "type": "integer"}}, "title": "InputTokenDetails", "type": "object"}, "InvalidToolCall": {"description": "Allowance for errors made by LLM.\\n\\nHere we add an ``error`` key to surface errors made during generation\\n(e.g., invalid JSON arguments.)", "properties": {"type": {"const": "invalid_tool_call", "title": "Type", "type": "string"}, "id": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Id"}, "name": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Name"}, "args": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Args"}, "error": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Error"}, "index": {"title": "Index", "type": "integer"}, "extras": {"additionalProperties": true, "title": "Extras", "type": "object"}}, "required": ["type", "id", "name", "args", "error"], "title": "InvalidToolCall", "type": "object"}, "OutputTokenDetails": {"description": "Breakdown of output token counts.\\n\\nDoes *not* need to sum to full output token count. Does *not* need to have all keys.\\n\\nExample:\\n\\n    .. code-block:: python\\n\\n        {\\n            \\"audio\\": 10,\\n            \\"reasoning\\": 200,\\n        }\\n\\n.. versionadded:: 0.3.9", "properties": {"audio": {"title": "Audio", "type": "integer"}, "reasoning": {"title": "Reasoning", "type": "integer"}}, "title": "OutputTokenDetails", "type": "object"}, "SystemMessage": {"additionalProperties": true, "description": "Message for priming AI behavior.\\n\\nThe system message is usually passed in as the first of a sequence\\nof input messages.\\n\\nExample:\\n\\n    .. code-block:: python\\n\\n        from langchain_core.messages import HumanMessage, SystemMessage\\n\\n        messages = [\\n            SystemMessage(\\n                content=\\"You are a helpful assistant! Your name is Bob.\\"\\n            ),\\n            HumanMessage(\\n                content=\\"What is your name?\\"\\n            )\\n        ]\\n\\n        # Define a chat model and invoke it with the messages\\n        print(model.invoke(messages))", "properties": {"content": {"anyOf": [{"type": "string"}, {"items": {"anyOf": [{"type": "string"}, {"additionalProperties": true, "type": "object"}]}, "type": "array"}], "title": "Content"}, "additional_kwargs": {"additionalProperties": true, "title": "Additional Kwargs", "type": "object"}, "response_metadata": {"additionalProperties": true, "title": "Response Metadata", "type": "object"}, "type": {"const": "system", "default": "system", "title": "Type", "type": "string"}, "name": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Name"}, "id": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Id"}}, "required": ["content"], "title": "SystemMessage", "type": "object"}, "SystemMessageChunk": {"additionalProperties": true, "description": "System Message chunk.", "properties": {"content": {"anyOf": [{"type": "string"}, {"items": {"anyOf": [{"type": "string"}, {"additionalProperties": true, "type": "object"}]}, "type": "array"}], "title": "Content"}, "additional_kwargs": {"additionalProperties": true, "title": "Additional Kwargs", "type": "object"}, "response_metadata": {"additionalProperties": true, "title": "Response Metadata", "type": "object"}, "type": {"const": "SystemMessageChunk", "default": "SystemMessageChunk", "title": "Type", "type": "string"}, "name": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Name"}, "id": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Id"}}, "required": ["content"], "title": "SystemMessageChunk", "type": "object"}, "ToolCall": {"description": "Represents a request to call a tool.\\n\\nExample:\\n\\n    .. code-block:: python\\n\\n        {\\n            \\"name\\": \\"foo\\",\\n            \\"args\\": {\\"a\\": 1},\\n            \\"id\\": \\"123\\"\\n        }\\n\\n    This represents a request to call the tool named \\"foo\\" with arguments {\\"a\\": 1}\\n    and an identifier of \\"123\\".\\n\\n.. note::\\n    ``create_tool_call`` may also be used as a factory to create a\\n    ``ToolCall``. Benefits include:\\n\\n    * Automatic ID generation (when not provided)\\n    * Required arguments strictly validated at creation time", "properties": {"type": {"const": "tool_call", "title": "Type", "type": "string"}, "id": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Id"}, "name": {"title": "Name", "type": "string"}, "args": {"additionalProperties": true, "title": "Args", "type": "object"}, "index": {"title": "Index", "type": "integer"}, "extras": {"additionalProperties": true, "title": "Extras", "type": "object"}}, "required": ["type", "id", "name", "args"], "title": "ToolCall", "type": "object"}, "ToolCallChunk": {"description": "A chunk of a tool call (e.g., as part of a stream).\\n\\nWhen merging ToolCallChunks (e.g., via ``AIMessageChunk.__add__``),\\nall string attributes are concatenated. Chunks are only merged if their\\nvalues of ``index`` are equal and not ``None``.\\n\\nExample:\\n\\n.. code-block:: python\\n\\n    left_chunks = [ToolCallChunk(name=\\"foo\\", args=\'{\\"a\\":\', index=0)]\\n    right_chunks = [ToolCallChunk(name=None, args=\'1}\', index=0)]\\n\\n    (\\n        AIMessageChunk(content=\\"\\", tool_call_chunks=left_chunks)\\n        + AIMessageChunk(content=\\"\\", tool_call_chunks=right_chunks)\\n    ).tool_call_chunks == [ToolCallChunk(name=\'foo\', args=\'{\\"a\\":1}\', index=0)]", "properties": {"type": {"const": "tool_call_chunk", "title": "Type", "type": "string"}, "id": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Id"}, "name": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Name"}, "args": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Args"}, "index": {"anyOf": [{"type": "integer"}, {"type": "null"}], "title": "Index"}, "extras": {"additionalProperties": true, "title": "Extras", "type": "object"}}, "required": ["id", "name", "args", "index"], "title": "ToolCallChunk", "type": "object"}, "ToolMessage": {"additionalProperties": true, "description": "Message for passing the result of executing a tool back to a model.\\n\\nToolMessages contain the result of a tool invocation. Typically, the result\\nis encoded inside the `content` field.\\n\\nExample: A ToolMessage representing a result of 42 from a tool call with id\\n\\n    .. code-block:: python\\n\\n        from langchain_core.messages import ToolMessage\\n\\n        ToolMessage(content=\'42\', tool_call_id=\'call_Jja7J89XsjrOLA5r!MEOW!SL\')\\n\\n\\nExample: A ToolMessage where only part of the tool output is sent to the model\\n    and the full output is passed in to artifact.\\n\\n    .. versionadded:: 0.2.17\\n\\n    .. code-block:: python\\n\\n        from langchain_core.messages import ToolMessage\\n\\n        tool_output = {\\n            \\"stdout\\": \\"From the graph we can see that the correlation between x and y is ...\\",\\n            \\"stderr\\": None,\\n            \\"artifacts\\": {\\"type\\": \\"image\\", \\"base64_data\\": \\"/9j/4gIcSU...\\"},\\n        }\\n\\n        ToolMessage(\\n            content=tool_output[\\"stdout\\"],\\n            artifact=tool_output,\\n            tool_call_id=\'call_Jja7J89XsjrOLA5r!MEOW!SL\',\\n        )\\n\\nThe tool_call_id field is used to associate the tool call request with the\\ntool call response. This is useful in situations where a chat model is able\\nto request multiple tool calls in parallel.", "properties": {"content": {"anyOf": [{"type": "string"}, {"items": {"anyOf": [{"type": "string"}, {"additionalProperties": true, "type": "object"}]}, "type": "array"}], "title": "Content"}, "additional_kwargs": {"additionalProperties": true, "title": "Additional Kwargs", "type": "object"}, "response_metadata": {"additionalProperties": true, "title": "Response Metadata", "type": "object"}, "type": {"const": "tool", "default": "tool", "title": "Type", "type": "string"}, "name": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Name"}, "id": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Id"}, "tool_call_id": {"title": "Tool Call Id", "type": "string"}, "artifact": {"default": null, "title": "Artifact"}, "status": {"default": "success", "enum": ["success", "error"], "title": "Status", "type": "string"}}, "required": ["content", "tool_call_id"], "title": "ToolMessage", "type": "object"}, "ToolMessageChunk": {"additionalProperties": true, "description": "Tool Message chunk.", "properties": {"content": {"anyOf": [{"type": "string"}, {"items": {"anyOf": [{"type": "string"}, {"additionalProperties": true, "type": "object"}]}, "type": "array"}], "title": "Content"}, "additional_kwargs": {"additionalProperties": true, "title": "Additional Kwargs", "type": "object"}, "response_metadata": {"additionalProperties": true, "title": "Response Metadata", "type": "object"}, "type": {"const": "ToolMessageChunk", "default": "ToolMessageChunk", "title": "Type", "type": "string"}, "name": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Name"}, "id": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Id"}, "tool_call_id": {"title": "Tool Call Id", "type": "string"}, "artifact": {"default": null, "title": "Artifact"}, "status": {"default": "success", "enum": ["success", "error"], "title": "Status", "type": "string"}}, "required": ["content", "tool_call_id"], "title": "ToolMessageChunk", "type": "object"}, "UsageMetadata": {"description": "Usage metadata for a message, such as token counts.\\n\\nThis is a standard representation of token usage that is consistent across models.\\n\\nExample:\\n\\n    .. code-block:: python\\n\\n        {\\n            \\"input_tokens\\": 350,\\n            \\"output_tokens\\": 240,\\n            \\"total_tokens\\": 590,\\n            \\"input_token_details\\": {\\n                \\"audio\\": 10,\\n                \\"cache_creation\\": 200,\\n                \\"cache_read\\": 100,\\n            },\\n            \\"output_token_details\\": {\\n                \\"audio\\": 10,\\n                \\"reasoning\\": 200,\\n            }\\n        }\\n\\n.. versionchanged:: 0.3.9\\n\\n    Added ``input_token_details`` and ``output_token_details``.", "properties": {"input_tokens": {"title": "Input Tokens", "type": "integer"}, "output_tokens": {"title": "Output Tokens", "type": "integer"}, "total_tokens": {"title": "Total Tokens", "type": "integer"}, "input_token_details": {"$ref": "#/$defs/InputTokenDetails"}, "output_token_details": {"$ref": "#/$defs/OutputTokenDetails"}}, "required": ["input_tokens", "output_tokens", "total_tokens"], "title": "UsageMetadata", "type": "object"}}, "default": null, "items": {"oneOf": [{"$ref": "#/$defs/AIMessage"}, {"$ref": "#/$defs/HumanMessage"}, {"$ref": "#/$defs/ChatMessage"}, {"$ref": "#/$defs/SystemMessage"}, {"$ref": "#/$defs/FunctionMessage"}, {"$ref": "#/$defs/ToolMessage"}, {"$ref": "#/$defs/AIMessageChunk"}, {"$ref": "#/$defs/HumanMessageChunk"}, {"$ref": "#/$defs/ChatMessageChunk"}, {"$ref": "#/$defs/SystemMessageChunk"}, {"$ref": "#/$defs/FunctionMessageChunk"}, {"$ref": "#/$defs/ToolMessageChunk"}]}, "title": "LangGraphInput", "type": "array"}'
# ---
# name: test_message_graph[memory].1
  '{"$defs": {"AIMessage": {"additionalProperties": true, "description": "Message from an AI.\\n\\nAIMessage is returned from a chat model as a response to a prompt.\\n\\nThis message represents the output of the model and consists of both\\nthe raw output as returned by the model together standardized fields\\n(e.g., tool calls, usage metadata) added by the LangChain framework.", "properties": {"content": {"anyOf": [{"type": "string"}, {"items": {"anyOf": [{"type": "string"}, {"additionalProperties": true, "type": "object"}]}, "type": "array"}], "title": "Content"}, "additional_kwargs": {"additionalProperties": true, "title": "Additional Kwargs", "type": "object"}, "response_metadata": {"additionalProperties": true, "title": "Response Metadata", "type": "object"}, "type": {"const": "ai", "default": "ai", "title": "Type", "type": "string"}, "name": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Name"}, "id": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Id"}, "example": {"default": false, "title": "Example", "type": "boolean"}, "tool_calls": {"default": [], "items": {"$ref": "#/$defs/ToolCall"}, "title": "Tool Calls", "type": "array"}, "invalid_tool_calls": {"default": [], "items": {"$ref": "#/$defs/InvalidToolCall"}, "title": "Invalid Tool Calls", "type": "array"}, "usage_metadata": {"anyOf": [{"$ref": "#/$defs/UsageMetadata"}, {"type": "null"}], "default": null}}, "required": ["content"], "title": "AIMessage", "type": "object"}, "AIMessageChunk": {"additionalProperties": true, "description": "Message chunk from an AI.", "properties": {"content": {"anyOf": [{"type": "string"}, {"items": {"anyOf": [{"type": "string"}, {"additionalProperties": true, "type": "object"}]}, "type": "array"}], "title": "Content"}, "additional_kwargs": {"additionalProperties": true, "title": "Additional Kwargs", "type": "object"}, "response_metadata": {"additionalProperties": true, "title": "Response Metadata", "type": "object"}, "type": {"const": "AIMessageChunk", "default": "AIMessageChunk", "title": "Type", "type": "string"}, "name": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Name"}, "id": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Id"}, "example": {"default": false, "title": "Example", "type": "boolean"}, "tool_calls": {"default": [], "items": {"$ref": "#/$defs/ToolCall"}, "title": "Tool Calls", "type": "array"}, "invalid_tool_calls": {"default": [], "items": {"$ref": "#/$defs/InvalidToolCall"}, "title": "Invalid Tool Calls", "type": "array"}, "usage_metadata": {"anyOf": [{"$ref": "#/$defs/UsageMetadata"}, {"type": "null"}], "default": null}, "tool_call_chunks": {"default": [], "items": {"$ref": "#/$defs/ToolCallChunk"}, "title": "Tool Call Chunks", "type": "array"}}, "required": ["content"], "title": "AIMessageChunk", "type": "object"}, "ChatMessage": {"additionalProperties": true, "description": "Message that can be assigned an arbitrary speaker (i.e. role).", "properties": {"content": {"anyOf": [{"type": "string"}, {"items": {"anyOf": [{"type": "string"}, {"additionalProperties": true, "type": "object"}]}, "type": "array"}], "title": "Content"}, "additional_kwargs": {"additionalProperties": true, "title": "Additional Kwargs", "type": "object"}, "response_metadata": {"additionalProperties": true, "title": "Response Metadata", "type": "object"}, "type": {"const": "chat", "default": "chat", "title": "Type", "type": "string"}, "name": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Name"}, "id": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Id"}, "role": {"title": "Role", "type": "string"}}, "required": ["content", "role"], "title": "ChatMessage", "type": "object"}, "ChatMessageChunk": {"additionalProperties": true, "description": "Chat Message chunk.", "properties": {"content": {"anyOf": [{"type": "string"}, {"items": {"anyOf": [{"type": "string"}, {"additionalProperties": true, "type": "object"}]}, "type": "array"}], "title": "Content"}, "additional_kwargs": {"additionalProperties": true, "title": "Additional Kwargs", "type": "object"}, "response_metadata": {"additionalProperties": true, "title": "Response Metadata", "type": "object"}, "type": {"const": "ChatMessageChunk", "default": "ChatMessageChunk", "title": "Type", "type": "string"}, "name": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Name"}, "id": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Id"}, "role": {"title": "Role", "type": "string"}}, "required": ["content", "role"], "title": "ChatMessageChunk", "type": "object"}, "FunctionMessage": {"additionalProperties": true, "description": "Message for passing the result of executing a tool back to a model.\\n\\nFunctionMessage are an older version of the ToolMessage schema, and\\ndo not contain the tool_call_id field.\\n\\nThe tool_call_id field is used to associate the tool call request with the\\ntool call response. This is useful in situations where a chat model is able\\nto request multiple tool calls in parallel.", "properties": {"content": {"anyOf": [{"type": "string"}, {"items": {"anyOf": [{"type": "string"}, {"additionalProperties": true, "type": "object"}]}, "type": "array"}], "title": "Content"}, "additional_kwargs": {"additionalProperties": true, "title": "Additional Kwargs", "type": "object"}, "response_metadata": {"additionalProperties": true, "title": "Response Metadata", "type": "object"}, "type": {"const": "function", "default": "function", "title": "Type", "type": "string"}, "name": {"title": "Name", "type": "string"}, "id": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Id"}}, "required": ["content", "name"], "title": "FunctionMessage", "type": "object"}, "FunctionMessageChunk": {"additionalProperties": true, "description": "Function Message chunk.", "properties": {"content": {"anyOf": [{"type": "string"}, {"items": {"anyOf": [{"type": "string"}, {"additionalProperties": true, "type": "object"}]}, "type": "array"}], "title": "Content"}, "additional_kwargs": {"additionalProperties": true, "title": "Additional Kwargs", "type": "object"}, "response_metadata": {"additionalProperties": true, "title": "Response Metadata", "type": "object"}, "type": {"const": "FunctionMessageChunk", "default": "FunctionMessageChunk", "title": "Type", "type": "string"}, "name": {"title": "Name", "type": "string"}, "id": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Id"}}, "required": ["content", "name"], "title": "FunctionMessageChunk", "type": "object"}, "HumanMessage": {"additionalProperties": true, "description": "Message from a human.\\n\\nHumanMessages are messages that are passed in from a human to the model.\\n\\nExample:\\n\\n    .. code-block:: python\\n\\n        from langchain_core.messages import HumanMessage, SystemMessage\\n\\n        messages = [\\n            SystemMessage(\\n                content=\\"You are a helpful assistant! Your name is Bob.\\"\\n            ),\\n            HumanMessage(\\n                content=\\"What is your name?\\"\\n            )\\n        ]\\n\\n        # Instantiate a chat model and invoke it with the messages\\n        model = ...\\n        print(model.invoke(messages))", "properties": {"content": {"anyOf": [{"type": "string"}, {"items": {"anyOf": [{"type": "string"}, {"additionalProperties": true, "type": "object"}]}, "type": "array"}], "title": "Content"}, "additional_kwargs": {"additionalProperties": true, "title": "Additional Kwargs", "type": "object"}, "response_metadata": {"additionalProperties": true, "title": "Response Metadata", "type": "object"}, "type": {"const": "human", "default": "human", "title": "Type", "type": "string"}, "name": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Name"}, "id": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Id"}, "example": {"default": false, "title": "Example", "type": "boolean"}}, "required": ["content"], "title": "HumanMessage", "type": "object"}, "HumanMessageChunk": {"additionalProperties": true, "description": "Human Message chunk.", "properties": {"content": {"anyOf": [{"type": "string"}, {"items": {"anyOf": [{"type": "string"}, {"additionalProperties": true, "type": "object"}]}, "type": "array"}], "title": "Content"}, "additional_kwargs": {"additionalProperties": true, "title": "Additional Kwargs", "type": "object"}, "response_metadata": {"additionalProperties": true, "title": "Response Metadata", "type": "object"}, "type": {"const": "HumanMessageChunk", "default": "HumanMessageChunk", "title": "Type", "type": "string"}, "name": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Name"}, "id": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Id"}, "example": {"default": false, "title": "Example", "type": "boolean"}}, "required": ["content"], "title": "HumanMessageChunk", "type": "object"}, "InputTokenDetails": {"description": "Breakdown of input token counts.\\n\\nDoes *not* need to sum to full input token count. Does *not* need to have all keys.\\n\\nExample:\\n\\n    .. code-block:: python\\n\\n        {\\n            \\"audio\\": 10,\\n            \\"cache_creation\\": 200,\\n            \\"cache_read\\": 100,\\n        }\\n\\n.. versionadded:: 0.3.9\\n\\nMay also hold extra provider-specific keys.", "properties": {"audio": {"title": "Audio", "type": "integer"}, "cache_creation": {"title": "Cache Creation", "type": "integer"}, "cache_read": {"title": "Cache Read", "type": "integer"}}, "title": "InputTokenDetails", "type": "object"}, "InvalidToolCall": {"description": "Allowance for errors made by LLM.\\n\\nHere we add an ``error`` key to surface errors made during generation\\n(e.g., invalid JSON arguments.)", "properties": {"type": {"const": "invalid_tool_call", "title": "Type", "type": "string"}, "id": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Id"}, "name": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Name"}, "args": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Args"}, "error": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Error"}, "index": {"title": "Index", "type": "integer"}, "extras": {"additionalProperties": true, "title": "Extras", "type": "object"}}, "required": ["type", "id", "name", "args", "error"], "title": "InvalidToolCall", "type": "object"}, "OutputTokenDetails": {"description": "Breakdown of output token counts.\\n\\nDoes *not* need to sum to full output token count. Does *not* need to have all keys.\\n\\nExample:\\n\\n    .. code-block:: python\\n\\n        {\\n            \\"audio\\": 10,\\n            \\"reasoning\\": 200,\\n        }\\n\\n.. versionadded:: 0.3.9", "properties": {"audio": {"title": "Audio", "type": "integer"}, "reasoning": {"title": "Reasoning", "type": "integer"}}, "title": "OutputTokenDetails", "type": "object"}, "SystemMessage": {"additionalProperties": true, "description": "Message for priming AI behavior.\\n\\nThe system message is usually passed in as the first of a sequence\\nof input messages.\\n\\nExample:\\n\\n    .. code-block:: python\\n\\n        from langchain_core.messages import HumanMessage, SystemMessage\\n\\n        messages = [\\n            SystemMessage(\\n                content=\\"You are a helpful assistant! Your name is Bob.\\"\\n            ),\\n            HumanMessage(\\n                content=\\"What is your name?\\"\\n            )\\n        ]\\n\\n        # Define a chat model and invoke it with the messages\\n        print(model.invoke(messages))", "properties": {"content": {"anyOf": [{"type": "string"}, {"items": {"anyOf": [{"type": "string"}, {"additionalProperties": true, "type": "object"}]}, "type": "array"}], "title": "Content"}, "additional_kwargs": {"additionalProperties": true, "title": "Additional Kwargs", "type": "object"}, "response_metadata": {"additionalProperties": true, "title": "Response Metadata", "type": "object"}, "type": {"const": "system", "default": "system", "title": "Type", "type": "string"}, "name": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Name"}, "id": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Id"}}, "required": ["content"], "title": "SystemMessage", "type": "object"}, "SystemMessageChunk": {"additionalProperties": true, "description": "System Message chunk.", "properties": {"content": {"anyOf": [{"type": "string"}, {"items": {"anyOf": [{"type": "string"}, {"additionalProperties": true, "type": "object"}]}, "type": "array"}], "title": "Content"}, "additional_kwargs": {"additionalProperties": true, "title": "Additional Kwargs", "type": "object"}, "response_metadata": {"additionalProperties": true, "title": "Response Metadata", "type": "object"}, "type": {"const": "SystemMessageChunk", "default": "SystemMessageChunk", "title": "Type", "type": "string"}, "name": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Name"}, "id": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Id"}}, "required": ["content"], "title": "SystemMessageChunk", "type": "object"}, "ToolCall": {"description": "Represents a request to call a tool.\\n\\nExample:\\n\\n    .. code-block:: python\\n\\n        {\\n            \\"name\\": \\"foo\\",\\n            \\"args\\": {\\"a\\": 1},\\n            \\"id\\": \\"123\\"\\n        }\\n\\n    This represents a request to call the tool named \\"foo\\" with arguments {\\"a\\": 1}\\n    and an identifier of \\"123\\".\\n\\n.. note::\\n    ``create_tool_call`` may also be used as a factory to create a\\n    ``ToolCall``. Benefits include:\\n\\n    * Automatic ID generation (when not provided)\\n    * Required arguments strictly validated at creation time", "properties": {"type": {"const": "tool_call", "title": "Type", "type": "string"}, "id": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Id"}, "name": {"title": "Name", "type": "string"}, "args": {"additionalProperties": true, "title": "Args", "type": "object"}, "index": {"title": "Index", "type": "integer"}, "extras": {"additionalProperties": true, "title": "Extras", "type": "object"}}, "required": ["type", "id", "name", "args"], "title": "ToolCall", "type": "object"}, "ToolCallChunk": {"description": "A chunk of a tool call (e.g., as part of a stream).\\n\\nWhen merging ToolCallChunks (e.g., via ``AIMessageChunk.__add__``),\\nall string attributes are concatenated. Chunks are only merged if their\\nvalues of ``index`` are equal and not ``None``.\\n\\nExample:\\n\\n.. code-block:: python\\n\\n    left_chunks = [ToolCallChunk(name=\\"foo\\", args=\'{\\"a\\":\', index=0)]\\n    right_chunks = [ToolCallChunk(name=None, args=\'1}\', index=0)]\\n\\n    (\\n        AIMessageChunk(content=\\"\\", tool_call_chunks=left_chunks)\\n        + AIMessageChunk(content=\\"\\", tool_call_chunks=right_chunks)\\n    ).tool_call_chunks == [ToolCallChunk(name=\'foo\', args=\'{\\"a\\":1}\', index=0)]", "properties": {"type": {"const": "tool_call_chunk", "title": "Type", "type": "string"}, "id": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Id"}, "name": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Name"}, "args": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Args"}, "index": {"anyOf": [{"type": "integer"}, {"type": "null"}], "title": "Index"}, "extras": {"additionalProperties": true, "title": "Extras", "type": "object"}}, "required": ["id", "name", "args", "index"], "title": "ToolCallChunk", "type": "object"}, "ToolMessage": {"additionalProperties": true, "description": "Message for passing the result of executing a tool back to a model.\\n\\nToolMessages contain the result of a tool invocation. Typically, the result\\nis encoded inside the `content` field.\\n\\nExample: A ToolMessage representing a result of 42 from a tool call with id\\n\\n    .. code-block:: python\\n\\n        from langchain_core.messages import ToolMessage\\n\\n        ToolMessage(content=\'42\', tool_call_id=\'call_Jja7J89XsjrOLA5r!MEOW!SL\')\\n\\n\\nExample: A ToolMessage where only part of the tool output is sent to the model\\n    and the full output is passed in to artifact.\\n\\n    .. versionadded:: 0.2.17\\n\\n    .. code-block:: python\\n\\n        from langchain_core.messages import ToolMessage\\n\\n        tool_output = {\\n            \\"stdout\\": \\"From the graph we can see that the correlation between x and y is ...\\",\\n            \\"stderr\\": None,\\n            \\"artifacts\\": {\\"type\\": \\"image\\", \\"base64_data\\": \\"/9j/4gIcSU...\\"},\\n        }\\n\\n        ToolMessage(\\n            content=tool_output[\\"stdout\\"],\\n            artifact=tool_output,\\n            tool_call_id=\'call_Jja7J89XsjrOLA5r!MEOW!SL\',\\n        )\\n\\nThe tool_call_id field is used to associate the tool call request with the\\ntool call response. This is useful in situations where a chat model is able\\nto request multiple tool calls in parallel.", "properties": {"content": {"anyOf": [{"type": "string"}, {"items": {"anyOf": [{"type": "string"}, {"additionalProperties": true, "type": "object"}]}, "type": "array"}], "title": "Content"}, "additional_kwargs": {"additionalProperties": true, "title": "Additional Kwargs", "type": "object"}, "response_metadata": {"additionalProperties": true, "title": "Response Metadata", "type": "object"}, "type": {"const": "tool", "default": "tool", "title": "Type", "type": "string"}, "name": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Name"}, "id": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Id"}, "tool_call_id": {"title": "Tool Call Id", "type": "string"}, "artifact": {"default": null, "title": "Artifact"}, "status": {"default": "success", "enum": ["success", "error"], "title": "Status", "type": "string"}}, "required": ["content", "tool_call_id"], "title": "ToolMessage", "type": "object"}, "ToolMessageChunk": {"additionalProperties": true, "description": "Tool Message chunk.", "properties": {"content": {"anyOf": [{"type": "string"}, {"items": {"anyOf": [{"type": "string"}, {"additionalProperties": true, "type": "object"}]}, "type": "array"}], "title": "Content"}, "additional_kwargs": {"additionalProperties": true, "title": "Additional Kwargs", "type": "object"}, "response_metadata": {"additionalProperties": true, "title": "Response Metadata", "type": "object"}, "type": {"const": "ToolMessageChunk", "default": "ToolMessageChunk", "title": "Type", "type": "string"}, "name": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Name"}, "id": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Id"}, "tool_call_id": {"title": "Tool Call Id", "type": "string"}, "artifact": {"default": null, "title": "Artifact"}, "status": {"default": "success", "enum": ["success", "error"], "title": "Status", "type": "string"}}, "required": ["content", "tool_call_id"], "title": "ToolMessageChunk", "type": "object"}, "UsageMetadata": {"description": "Usage metadata for a message, such as token counts.\\n\\nThis is a standard representation of token usage that is consistent across models.\\n\\nExample:\\n\\n    .. code-block:: python\\n\\n        {\\n            \\"input_tokens\\": 350,\\n            \\"output_tokens\\": 240,\\n            \\"total_tokens\\": 590,\\n            \\"input_token_details\\": {\\n                \\"audio\\": 10,\\n                \\"cache_creation\\": 200,\\n                \\"cache_read\\": 100,\\n            },\\n            \\"output_token_details\\": {\\n                \\"audio\\": 10,\\n                \\"reasoning\\": 200,\\n            }\\n        }\\n\\n.. versionchanged:: 0.3.9\\n\\n    Added ``input_token_details`` and ``output_token_details``.", "properties": {"input_tokens": {"title": "Input Tokens", "type": "integer"}, "output_tokens": {"title": "Output Tokens", "type": "integer"}, "total_tokens": {"title": "Total Tokens", "type": "integer"}, "input_token_details": {"$ref": "#/$defs/InputTokenDetails"}, "output_token_details": {"$ref": "#/$defs/OutputTokenDetails"}}, "required": ["input_tokens", "output_tokens", "total_tokens"], "title": "UsageMetadata", "type": "object"}}, "default": null, "items": {"oneOf": [{"$ref": "#/$defs/AIMessage"}, {"$ref": "#/$defs/HumanMessage"}, {"$ref": "#/$defs/ChatMessage"}, {"$ref": "#/$defs/SystemMessage"}, {"$ref": "#/$defs/FunctionMessage"}, {"$ref": "#/$defs/ToolMessage"}, {"$ref": "#/$defs/AIMessageChunk"}, {"$ref": "#/$defs/HumanMessageChunk"}, {"$ref": "#/$defs/ChatMessageChunk"}, {"$ref": "#/$defs/SystemMessageChunk"}, {"$ref": "#/$defs/FunctionMessageChunk"}, {"$ref": "#/$defs/ToolMessageChunk"}]}, "title": "LangGraphOutput", "type": "array"}'
# ---
# name: test_message_graph[memory].2
  '''
  {
    "nodes": [
      {
        "id": "__start__",
        "type": "runnable",
        "data": {
          "id": [
            "langgraph",
            "_internal",
            "_runnable",
            "RunnableCallable"
          ],
          "name": "__start__"
        }
      },
      {
        "id": "agent",
        "type": "runnable",
        "data": {
          "id": [
            "tests",
            "test_large_cases",
            "FakeFunctionChatModel"
          ],
          "name": "agent"
        }
      },
      {
        "id": "tools",
        "type": "runnable",
        "data": {
          "id": [
            "langgraph",
            "prebuilt",
            "tool_node",
            "ToolNode"
          ],
          "name": "tools"
        }
      },
      {
        "id": "__end__"
      }
    ],
    "edges": [
      {
        "source": "__start__",
        "target": "agent"
      },
      {
        "source": "agent",
        "target": "__end__",
        "data": "end",
        "conditional": true
      },
      {
        "source": "agent",
        "target": "tools",
        "data": "continue",
        "conditional": true
      },
      {
        "source": "tools",
        "target": "agent"
      }
    ]
  }
  '''
# ---
# name: test_message_graph[memory].3
  '''
  graph TD;
  	__start__ --> agent;
  	agent -. &nbsp;end&nbsp; .-> __end__;
  	agent -. &nbsp;continue&nbsp; .-> tools;
  	tools --> agent;
  
  '''
# ---
# name: test_prebuilt_tool_chat
  '{"$defs": {"AIMessage": {"properties": {"type": {"const": "ai", "default": "ai", "title": "Type", "type": "string"}, "name": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Name"}, "id": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Id"}, "lc_version": {"default": "v1", "title": "Lc Version", "type": "string"}, "content": {"items": {"anyOf": [{"$ref": "#/$defs/TextContentBlock"}, {"$ref": "#/$defs/ToolCall"}, {"$ref": "#/$defs/InvalidToolCall"}, {"$ref": "#/$defs/ToolCallChunk"}, {"$ref": "#/$defs/ReasoningContentBlock"}, {"$ref": "#/$defs/NonStandardContentBlock"}, {"$ref": "#/$defs/ImageContentBlock"}, {"$ref": "#/$defs/VideoContentBlock"}, {"$ref": "#/$defs/AudioContentBlock"}, {"$ref": "#/$defs/PlainTextContentBlock"}, {"$ref": "#/$defs/FileContentBlock"}, {"$ref": "#/$defs/CodeInterpreterCall"}, {"$ref": "#/$defs/CodeInterpreterOutput"}, {"$ref": "#/$defs/CodeInterpreterResult"}, {"$ref": "#/$defs/WebSearchCall"}, {"$ref": "#/$defs/WebSearchResult"}]}, "title": "Content", "type": "array"}, "usage_metadata": {"anyOf": [{"$ref": "#/$defs/UsageMetadata"}, {"type": "null"}], "default": null}, "response_metadata": {"$ref": "#/$defs/ResponseMetadata"}, "parsed": {"anyOf": [{"additionalProperties": true, "type": "object"}, {"$ref": "#/$defs/BaseModel"}, {"type": "null"}], "default": null, "title": "Parsed"}}, "title": "AIMessage", "type": "object"}, "AIMessageChunk": {"properties": {"type": {"const": "ai_chunk", "default": "ai_chunk", "title": "Type", "type": "string"}, "name": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Name"}, "id": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Id"}, "lc_version": {"default": "v1", "title": "Lc Version", "type": "string"}, "content": {"items": {"anyOf": [{"$ref": "#/$defs/TextContentBlock"}, {"$ref": "#/$defs/ToolCall"}, {"$ref": "#/$defs/InvalidToolCall"}, {"$ref": "#/$defs/ToolCallChunk"}, {"$ref": "#/$defs/ReasoningContentBlock"}, {"$ref": "#/$defs/NonStandardContentBlock"}, {"$ref": "#/$defs/ImageContentBlock"}, {"$ref": "#/$defs/VideoContentBlock"}, {"$ref": "#/$defs/AudioContentBlock"}, {"$ref": "#/$defs/PlainTextContentBlock"}, {"$ref": "#/$defs/FileContentBlock"}, {"$ref": "#/$defs/CodeInterpreterCall"}, {"$ref": "#/$defs/CodeInterpreterOutput"}, {"$ref": "#/$defs/CodeInterpreterResult"}, {"$ref": "#/$defs/WebSearchCall"}, {"$ref": "#/$defs/WebSearchResult"}]}, "title": "Content", "type": "array"}, "usage_metadata": {"anyOf": [{"$ref": "#/$defs/UsageMetadata"}, {"type": "null"}], "default": null}, "response_metadata": {"$ref": "#/$defs/ResponseMetadata"}, "parsed": {"anyOf": [{"additionalProperties": true, "type": "object"}, {"$ref": "#/$defs/BaseModel"}, {"type": "null"}], "default": null, "title": "Parsed"}}, "title": "AIMessageChunk", "type": "object"}, "AudioContentBlock": {"description": "Audio data.\\n\\n.. note::\\n    ``create_audio_block`` may also be used as a factory to create an\\n    ``AudioContentBlock``. Benefits include:\\n\\n    * Automatic ID generation (when not provided)\\n    * Required arguments strictly validated at creation time", "properties": {"type": {"const": "audio", "title": "Type", "type": "string"}, "id": {"title": "Id", "type": "string"}, "file_id": {"title": "File Id", "type": "string"}, "mime_type": {"title": "Mime Type", "type": "string"}, "index": {"title": "Index", "type": "integer"}, "url": {"title": "Url", "type": "string"}, "base64": {"title": "Base64", "type": "string"}, "extras": {"additionalProperties": true, "title": "Extras", "type": "object"}}, "required": ["type"], "title": "AudioContentBlock", "type": "object"}, "BaseMessage": {"additionalProperties": true, "description": "Base abstract message class.\\n\\nMessages are the inputs and outputs of ChatModels.", "properties": {"content": {"anyOf": [{"type": "string"}, {"items": {"anyOf": [{"type": "string"}, {"additionalProperties": true, "type": "object"}]}, "type": "array"}], "title": "Content"}, "additional_kwargs": {"additionalProperties": true, "title": "Additional Kwargs", "type": "object"}, "response_metadata": {"additionalProperties": true, "title": "Response Metadata", "type": "object"}, "type": {"title": "Type", "type": "string"}, "name": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Name"}, "id": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Id"}}, "required": ["content", "type"], "title": "BaseMessage", "type": "object"}, "BaseModel": {"properties": {}, "title": "BaseModel", "type": "object"}, "Citation": {"description": "Annotation for citing data from a document.\\n\\n.. note::\\n    ``start/end`` indices refer to the **response text**,\\n    not the source text. This means that the indices are relative to the model\'s\\n    response, not the original document (as specified in the ``url``).\\n\\n.. note::\\n    ``create_citation`` may also be used as a factory to create a ``Citation``.\\n    Benefits include:\\n\\n    * Automatic ID generation (when not provided)\\n    * Required arguments strictly validated at creation time", "properties": {"type": {"const": "citation", "title": "Type", "type": "string"}, "id": {"title": "Id", "type": "string"}, "url": {"title": "Url", "type": "string"}, "title": {"title": "Title", "type": "string"}, "start_index": {"title": "Start Index", "type": "integer"}, "end_index": {"title": "End Index", "type": "integer"}, "cited_text": {"title": "Cited Text", "type": "string"}, "extras": {"additionalProperties": true, "title": "Extras", "type": "object"}}, "required": ["type"], "title": "Citation", "type": "object"}, "CodeInterpreterCall": {"description": "Built-in code interpreter tool call.", "properties": {"type": {"const": "code_interpreter_call", "title": "Type", "type": "string"}, "id": {"title": "Id", "type": "string"}, "language": {"title": "Language", "type": "string"}, "code": {"title": "Code", "type": "string"}, "index": {"title": "Index", "type": "integer"}, "extras": {"additionalProperties": true, "title": "Extras", "type": "object"}}, "required": ["type"], "title": "CodeInterpreterCall", "type": "object"}, "CodeInterpreterOutput": {"description": "Output of a singular code interpreter tool call.\\n\\nFull output of a code interpreter tool call is represented by\\n``CodeInterpreterResult`` which is a list of these blocks.", "properties": {"type": {"const": "code_interpreter_output", "title": "Type", "type": "string"}, "id": {"title": "Id", "type": "string"}, "return_code": {"title": "Return Code", "type": "integer"}, "stderr": {"title": "Stderr", "type": "string"}, "stdout": {"title": "Stdout", "type": "string"}, "file_ids": {"items": {"type": "string"}, "title": "File Ids", "type": "array"}, "index": {"title": "Index", "type": "integer"}, "extras": {"additionalProperties": true, "title": "Extras", "type": "object"}}, "required": ["type"], "title": "CodeInterpreterOutput", "type": "object"}, "CodeInterpreterResult": {"description": "Result of a code interpreter tool call.", "properties": {"type": {"const": "code_interpreter_result", "title": "Type", "type": "string"}, "id": {"title": "Id", "type": "string"}, "output": {"items": {"$ref": "#/$defs/CodeInterpreterOutput"}, "title": "Output", "type": "array"}, "index": {"title": "Index", "type": "integer"}, "extras": {"additionalProperties": true, "title": "Extras", "type": "object"}}, "required": ["type", "output"], "title": "CodeInterpreterResult", "type": "object"}, "FileContentBlock": {"description": "File data that doesn\'t fit into other multimodal blocks.\\n\\nThis block is intended for files that are not images, audio, or plaintext. For\\nexample, it can be used for PDFs, Word documents, etc.\\n\\nIf the file is an image, audio, or plaintext, you should use the corresponding\\ncontent block type (e.g., ``ImageContentBlock``, ``AudioContentBlock``,\\n``PlainTextContentBlock``).\\n\\n.. note::\\n    ``create_file_block`` may also be used as a factory to create a\\n    ``FileContentBlock``. Benefits include:\\n\\n    * Automatic ID generation (when not provided)\\n    * Required arguments strictly validated at creation time", "properties": {"type": {"const": "file", "title": "Type", "type": "string"}, "id": {"title": "Id", "type": "string"}, "file_id": {"title": "File Id", "type": "string"}, "mime_type": {"title": "Mime Type", "type": "string"}, "index": {"title": "Index", "type": "integer"}, "url": {"title": "Url", "type": "string"}, "base64": {"title": "Base64", "type": "string"}, "extras": {"additionalProperties": true, "title": "Extras", "type": "object"}}, "required": ["type"], "title": "FileContentBlock", "type": "object"}, "HumanMessage": {"properties": {"id": {"title": "Id", "type": "string"}, "content": {"items": {"anyOf": [{"$ref": "#/$defs/TextContentBlock"}, {"$ref": "#/$defs/ToolCall"}, {"$ref": "#/$defs/InvalidToolCall"}, {"$ref": "#/$defs/ToolCallChunk"}, {"$ref": "#/$defs/ReasoningContentBlock"}, {"$ref": "#/$defs/NonStandardContentBlock"}, {"$ref": "#/$defs/ImageContentBlock"}, {"$ref": "#/$defs/VideoContentBlock"}, {"$ref": "#/$defs/AudioContentBlock"}, {"$ref": "#/$defs/PlainTextContentBlock"}, {"$ref": "#/$defs/FileContentBlock"}, {"$ref": "#/$defs/CodeInterpreterCall"}, {"$ref": "#/$defs/CodeInterpreterOutput"}, {"$ref": "#/$defs/CodeInterpreterResult"}, {"$ref": "#/$defs/WebSearchCall"}, {"$ref": "#/$defs/WebSearchResult"}]}, "title": "Content", "type": "array"}, "type": {"const": "human", "default": "human", "title": "Type", "type": "string"}, "name": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Name"}}, "required": ["id", "content"], "title": "HumanMessage", "type": "object"}, "ImageContentBlock": {"description": "Image data.\\n\\n.. note::\\n    ``create_image_block`` may also be used as a factory to create a\\n    ``ImageContentBlock``. Benefits include:\\n\\n    * Automatic ID generation (when not provided)\\n    * Required arguments strictly validated at creation time", "properties": {"type": {"const": "image", "title": "Type", "type": "string"}, "id": {"title": "Id", "type": "string"}, "file_id": {"title": "File Id", "type": "string"}, "mime_type": {"title": "Mime Type", "type": "string"}, "index": {"title": "Index", "type": "integer"}, "url": {"title": "Url", "type": "string"}, "base64": {"title": "Base64", "type": "string"}, "extras": {"additionalProperties": true, "title": "Extras", "type": "object"}}, "required": ["type"], "title": "ImageContentBlock", "type": "object"}, "InputTokenDetails": {"description": "Breakdown of input token counts.\\n\\nDoes *not* need to sum to full input token count. Does *not* need to have all keys.\\n\\nExample:\\n\\n    .. code-block:: python\\n\\n        {\\n            \\"audio\\": 10,\\n            \\"cache_creation\\": 200,\\n            \\"cache_read\\": 100,\\n        }\\n\\n.. versionadded:: 0.3.9\\n\\nMay also hold extra provider-specific keys.", "properties": {"audio": {"title": "Audio", "type": "integer"}, "cache_creation": {"title": "Cache Creation", "type": "integer"}, "cache_read": {"title": "Cache Read", "type": "integer"}}, "title": "InputTokenDetails", "type": "object"}, "InvalidToolCall": {"description": "Allowance for errors made by LLM.\\n\\nHere we add an ``error`` key to surface errors made during generation\\n(e.g., invalid JSON arguments.)", "properties": {"type": {"const": "invalid_tool_call", "title": "Type", "type": "string"}, "id": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Id"}, "name": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Name"}, "args": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Args"}, "error": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Error"}, "index": {"title": "Index", "type": "integer"}, "extras": {"additionalProperties": true, "title": "Extras", "type": "object"}}, "required": ["type", "id", "name", "args", "error"], "title": "InvalidToolCall", "type": "object"}, "NonStandardAnnotation": {"description": "Provider-specific annotation format.", "properties": {"type": {"const": "non_standard_annotation", "title": "Type", "type": "string"}, "id": {"title": "Id", "type": "string"}, "value": {"additionalProperties": true, "title": "Value", "type": "object"}}, "required": ["type", "value"], "title": "NonStandardAnnotation", "type": "object"}, "NonStandardContentBlock": {"description": "Provider-specific data.\\n\\nThis block contains data for which there is not yet a standard type.\\n\\nThe purpose of this block should be to simply hold a provider-specific payload.\\nIf a provider\'s non-standard output includes reasoning and tool calls, it should be\\nthe adapter\'s job to parse that payload and emit the corresponding standard\\nReasoningContentBlock and ToolCallContentBlocks.\\n\\n.. note::\\n    ``create_non_standard_block`` may also be used as a factory to create a\\n    ``NonStandardContentBlock``. Benefits include:\\n\\n    * Automatic ID generation (when not provided)\\n    * Required arguments strictly validated at creation time", "properties": {"type": {"const": "non_standard", "title": "Type", "type": "string"}, "id": {"title": "Id", "type": "string"}, "value": {"additionalProperties": true, "title": "Value", "type": "object"}, "index": {"title": "Index", "type": "integer"}}, "required": ["type", "value"], "title": "NonStandardContentBlock", "type": "object"}, "OutputTokenDetails": {"description": "Breakdown of output token counts.\\n\\nDoes *not* need to sum to full output token count. Does *not* need to have all keys.\\n\\nExample:\\n\\n    .. code-block:: python\\n\\n        {\\n            \\"audio\\": 10,\\n            \\"reasoning\\": 200,\\n        }\\n\\n.. versionadded:: 0.3.9", "properties": {"audio": {"title": "Audio", "type": "integer"}, "reasoning": {"title": "Reasoning", "type": "integer"}}, "title": "OutputTokenDetails", "type": "object"}, "PlainTextContentBlock": {"description": "Plaintext data (e.g., from a document).\\n\\n.. note::\\n    Title and context are optional fields that may be passed to the model. See\\n    Anthropic `example <https://docs.anthropic.com/en/docs/build-with-claude/citations#citable-vs-non-citable-content>`__.\\n\\n.. note::\\n    ``create_plaintext_block`` may also be used as a factory to create a\\n    ``PlainTextContentBlock``. Benefits include:\\n\\n    * Automatic ID generation (when not provided)\\n    * Required arguments strictly validated at creation time", "properties": {"type": {"const": "text-plain", "title": "Type", "type": "string"}, "id": {"title": "Id", "type": "string"}, "file_id": {"title": "File Id", "type": "string"}, "mime_type": {"const": "text/plain", "title": "Mime Type", "type": "string"}, "index": {"title": "Index", "type": "integer"}, "url": {"title": "Url", "type": "string"}, "base64": {"title": "Base64", "type": "string"}, "text": {"title": "Text", "type": "string"}, "title": {"title": "Title", "type": "string"}, "context": {"title": "Context", "type": "string"}, "extras": {"additionalProperties": true, "title": "Extras", "type": "object"}}, "required": ["type", "mime_type"], "title": "PlainTextContentBlock", "type": "object"}, "ReasoningContentBlock": {"description": "Reasoning output from a LLM.\\n\\n.. note::\\n    ``create_reasoning_block`` may also be used as a factory to create a\\n    ``ReasoningContentBlock``. Benefits include:\\n\\n    * Automatic ID generation (when not provided)\\n    * Required arguments strictly validated at creation time", "properties": {"type": {"const": "reasoning", "title": "Type", "type": "string"}, "id": {"title": "Id", "type": "string"}, "reasoning": {"title": "Reasoning", "type": "string"}, "index": {"title": "Index", "type": "integer"}, "extras": {"additionalProperties": true, "title": "Extras", "type": "object"}}, "required": ["type"], "title": "ReasoningContentBlock", "type": "object"}, "ResponseMetadata": {"description": "Metadata about the response from the AI provider.\\n\\nContains additional information returned by the provider, such as\\nresponse headers, service tiers, log probabilities, system fingerprints, etc.\\n\\nExtra keys are permitted from what is typed here (via `total=False`), allowing\\nfor provider-specific metadata to be included without breaking the type\\ndefinition.", "properties": {"model_provider": {"title": "Model Provider", "type": "string"}, "model_name": {"title": "Model Name", "type": "string"}}, "title": "ResponseMetadata", "type": "object"}, "SystemMessage": {"properties": {"id": {"title": "Id", "type": "string"}, "content": {"items": {"anyOf": [{"$ref": "#/$defs/TextContentBlock"}, {"$ref": "#/$defs/ToolCall"}, {"$ref": "#/$defs/InvalidToolCall"}, {"$ref": "#/$defs/ToolCallChunk"}, {"$ref": "#/$defs/ReasoningContentBlock"}, {"$ref": "#/$defs/NonStandardContentBlock"}, {"$ref": "#/$defs/ImageContentBlock"}, {"$ref": "#/$defs/VideoContentBlock"}, {"$ref": "#/$defs/AudioContentBlock"}, {"$ref": "#/$defs/PlainTextContentBlock"}, {"$ref": "#/$defs/FileContentBlock"}, {"$ref": "#/$defs/CodeInterpreterCall"}, {"$ref": "#/$defs/CodeInterpreterOutput"}, {"$ref": "#/$defs/CodeInterpreterResult"}, {"$ref": "#/$defs/WebSearchCall"}, {"$ref": "#/$defs/WebSearchResult"}]}, "title": "Content", "type": "array"}, "type": {"const": "system", "default": "system", "title": "Type", "type": "string"}, "name": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Name"}, "custom_role": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Custom Role"}}, "required": ["id", "content"], "title": "SystemMessage", "type": "object"}, "TextContentBlock": {"description": "Text output from a LLM.\\n\\nThis typically represents the main text content of a message, such as the response\\nfrom a language model or the text of a user message.\\n\\n.. note::\\n    ``create_text_block`` may also be used as a factory to create a\\n    ``TextContentBlock``. Benefits include:\\n\\n    * Automatic ID generation (when not provided)\\n    * Required arguments strictly validated at creation time", "properties": {"type": {"const": "text", "title": "Type", "type": "string"}, "id": {"title": "Id", "type": "string"}, "text": {"title": "Text", "type": "string"}, "annotations": {"items": {"anyOf": [{"$ref": "#/$defs/Citation"}, {"$ref": "#/$defs/NonStandardAnnotation"}]}, "title": "Annotations", "type": "array"}, "index": {"title": "Index", "type": "integer"}, "extras": {"additionalProperties": true, "title": "Extras", "type": "object"}}, "required": ["type", "text"], "title": "TextContentBlock", "type": "object"}, "ToolCall": {"description": "Represents a request to call a tool.\\n\\nExample:\\n\\n    .. code-block:: python\\n\\n        {\\n            \\"name\\": \\"foo\\",\\n            \\"args\\": {\\"a\\": 1},\\n            \\"id\\": \\"123\\"\\n        }\\n\\n    This represents a request to call the tool named \\"foo\\" with arguments {\\"a\\": 1}\\n    and an identifier of \\"123\\".\\n\\n.. note::\\n    ``create_tool_call`` may also be used as a factory to create a\\n    ``ToolCall``. Benefits include:\\n\\n    * Automatic ID generation (when not provided)\\n    * Required arguments strictly validated at creation time", "properties": {"type": {"const": "tool_call", "title": "Type", "type": "string"}, "id": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Id"}, "name": {"title": "Name", "type": "string"}, "args": {"additionalProperties": true, "title": "Args", "type": "object"}, "index": {"title": "Index", "type": "integer"}, "extras": {"additionalProperties": true, "title": "Extras", "type": "object"}}, "required": ["type", "id", "name", "args"], "title": "ToolCall", "type": "object"}, "ToolCallChunk": {"description": "A chunk of a tool call (e.g., as part of a stream).\\n\\nWhen merging ToolCallChunks (e.g., via ``AIMessageChunk.__add__``),\\nall string attributes are concatenated. Chunks are only merged if their\\nvalues of ``index`` are equal and not ``None``.\\n\\nExample:\\n\\n.. code-block:: python\\n\\n    left_chunks = [ToolCallChunk(name=\\"foo\\", args=\'{\\"a\\":\', index=0)]\\n    right_chunks = [ToolCallChunk(name=None, args=\'1}\', index=0)]\\n\\n    (\\n        AIMessageChunk(content=\\"\\", tool_call_chunks=left_chunks)\\n        + AIMessageChunk(content=\\"\\", tool_call_chunks=right_chunks)\\n    ).tool_call_chunks == [ToolCallChunk(name=\'foo\', args=\'{\\"a\\":1}\', index=0)]", "properties": {"type": {"const": "tool_call_chunk", "title": "Type", "type": "string"}, "id": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Id"}, "name": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Name"}, "args": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Args"}, "index": {"anyOf": [{"type": "integer"}, {"type": "null"}], "title": "Index"}, "extras": {"additionalProperties": true, "title": "Extras", "type": "object"}}, "required": ["id", "name", "args", "index"], "title": "ToolCallChunk", "type": "object"}, "ToolMessage": {"properties": {"id": {"title": "Id", "type": "string"}, "tool_call_id": {"title": "Tool Call Id", "type": "string"}, "content": {"items": {"anyOf": [{"$ref": "#/$defs/TextContentBlock"}, {"$ref": "#/$defs/ToolCall"}, {"$ref": "#/$defs/InvalidToolCall"}, {"$ref": "#/$defs/ToolCallChunk"}, {"$ref": "#/$defs/ReasoningContentBlock"}, {"$ref": "#/$defs/NonStandardContentBlock"}, {"$ref": "#/$defs/ImageContentBlock"}, {"$ref": "#/$defs/VideoContentBlock"}, {"$ref": "#/$defs/AudioContentBlock"}, {"$ref": "#/$defs/PlainTextContentBlock"}, {"$ref": "#/$defs/FileContentBlock"}, {"$ref": "#/$defs/CodeInterpreterCall"}, {"$ref": "#/$defs/CodeInterpreterOutput"}, {"$ref": "#/$defs/CodeInterpreterResult"}, {"$ref": "#/$defs/WebSearchCall"}, {"$ref": "#/$defs/WebSearchResult"}]}, "title": "Content", "type": "array"}, "type": {"const": "tool", "default": "tool", "title": "Type", "type": "string"}, "artifact": {"anyOf": [{}, {"type": "null"}], "default": null, "title": "Artifact"}, "name": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Name"}, "status": {"default": "success", "enum": ["success", "error"], "title": "Status", "type": "string"}}, "required": ["id", "tool_call_id", "content"], "title": "ToolMessage", "type": "object"}, "UsageMetadata": {"description": "Usage metadata for a message, such as token counts.\\n\\nThis is a standard representation of token usage that is consistent across models.\\n\\nExample:\\n\\n    .. code-block:: python\\n\\n        {\\n            \\"input_tokens\\": 350,\\n            \\"output_tokens\\": 240,\\n            \\"total_tokens\\": 590,\\n            \\"input_token_details\\": {\\n                \\"audio\\": 10,\\n                \\"cache_creation\\": 200,\\n                \\"cache_read\\": 100,\\n            },\\n            \\"output_token_details\\": {\\n                \\"audio\\": 10,\\n                \\"reasoning\\": 200,\\n            }\\n        }\\n\\n.. versionchanged:: 0.3.9\\n\\n    Added ``input_token_details`` and ``output_token_details``.", "properties": {"input_tokens": {"title": "Input Tokens", "type": "integer"}, "output_tokens": {"title": "Output Tokens", "type": "integer"}, "total_tokens": {"title": "Total Tokens", "type": "integer"}, "input_token_details": {"$ref": "#/$defs/InputTokenDetails"}, "output_token_details": {"$ref": "#/$defs/OutputTokenDetails"}}, "required": ["input_tokens", "output_tokens", "total_tokens"], "title": "UsageMetadata", "type": "object"}, "VideoContentBlock": {"description": "Video data.\\n\\n.. note::\\n    ``create_video_block`` may also be used as a factory to create a\\n    ``VideoContentBlock``. Benefits include:\\n\\n    * Automatic ID generation (when not provided)\\n    * Required arguments strictly validated at creation time", "properties": {"type": {"const": "video", "title": "Type", "type": "string"}, "id": {"title": "Id", "type": "string"}, "file_id": {"title": "File Id", "type": "string"}, "mime_type": {"title": "Mime Type", "type": "string"}, "index": {"title": "Index", "type": "integer"}, "url": {"title": "Url", "type": "string"}, "base64": {"title": "Base64", "type": "string"}, "extras": {"additionalProperties": true, "title": "Extras", "type": "object"}}, "required": ["type"], "title": "VideoContentBlock", "type": "object"}, "WebSearchCall": {"description": "Built-in web search tool call.", "properties": {"type": {"const": "web_search_call", "title": "Type", "type": "string"}, "id": {"title": "Id", "type": "string"}, "query": {"title": "Query", "type": "string"}, "index": {"title": "Index", "type": "integer"}, "extras": {"additionalProperties": true, "title": "Extras", "type": "object"}}, "required": ["type"], "title": "WebSearchCall", "type": "object"}, "WebSearchResult": {"description": "Result of a built-in web search tool call.", "properties": {"type": {"const": "web_search_result", "title": "Type", "type": "string"}, "id": {"title": "Id", "type": "string"}, "urls": {"items": {"type": "string"}, "title": "Urls", "type": "array"}, "index": {"title": "Index", "type": "integer"}, "extras": {"additionalProperties": true, "title": "Extras", "type": "object"}}, "required": ["type"], "title": "WebSearchResult", "type": "object"}}, "description": "The state of the agent.", "properties": {"messages": {"items": {"anyOf": [{"$ref": "#/$defs/BaseMessage"}, {"$ref": "#/$defs/AIMessage"}, {"$ref": "#/$defs/AIMessageChunk"}, {"$ref": "#/$defs/HumanMessage"}, {"$ref": "#/$defs/SystemMessage"}, {"$ref": "#/$defs/ToolMessage"}]}, "title": "Messages", "type": "array"}, "remaining_steps": {"title": "Remaining Steps", "type": "integer"}}, "required": ["messages"], "title": "AgentState", "type": "object"}'
# ---
# name: test_prebuilt_tool_chat.1
  '{"$defs": {"AIMessage": {"properties": {"type": {"const": "ai", "default": "ai", "title": "Type", "type": "string"}, "name": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Name"}, "id": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Id"}, "lc_version": {"default": "v1", "title": "Lc Version", "type": "string"}, "content": {"items": {"anyOf": [{"$ref": "#/$defs/TextContentBlock"}, {"$ref": "#/$defs/ToolCall"}, {"$ref": "#/$defs/InvalidToolCall"}, {"$ref": "#/$defs/ToolCallChunk"}, {"$ref": "#/$defs/ReasoningContentBlock"}, {"$ref": "#/$defs/NonStandardContentBlock"}, {"$ref": "#/$defs/ImageContentBlock"}, {"$ref": "#/$defs/VideoContentBlock"}, {"$ref": "#/$defs/AudioContentBlock"}, {"$ref": "#/$defs/PlainTextContentBlock"}, {"$ref": "#/$defs/FileContentBlock"}, {"$ref": "#/$defs/CodeInterpreterCall"}, {"$ref": "#/$defs/CodeInterpreterOutput"}, {"$ref": "#/$defs/CodeInterpreterResult"}, {"$ref": "#/$defs/WebSearchCall"}, {"$ref": "#/$defs/WebSearchResult"}]}, "title": "Content", "type": "array"}, "usage_metadata": {"anyOf": [{"$ref": "#/$defs/UsageMetadata"}, {"type": "null"}], "default": null}, "response_metadata": {"$ref": "#/$defs/ResponseMetadata"}, "parsed": {"anyOf": [{"additionalProperties": true, "type": "object"}, {"$ref": "#/$defs/BaseModel"}, {"type": "null"}], "default": null, "title": "Parsed"}}, "title": "AIMessage", "type": "object"}, "AIMessageChunk": {"properties": {"type": {"const": "ai_chunk", "default": "ai_chunk", "title": "Type", "type": "string"}, "name": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Name"}, "id": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Id"}, "lc_version": {"default": "v1", "title": "Lc Version", "type": "string"}, "content": {"items": {"anyOf": [{"$ref": "#/$defs/TextContentBlock"}, {"$ref": "#/$defs/ToolCall"}, {"$ref": "#/$defs/InvalidToolCall"}, {"$ref": "#/$defs/ToolCallChunk"}, {"$ref": "#/$defs/ReasoningContentBlock"}, {"$ref": "#/$defs/NonStandardContentBlock"}, {"$ref": "#/$defs/ImageContentBlock"}, {"$ref": "#/$defs/VideoContentBlock"}, {"$ref": "#/$defs/AudioContentBlock"}, {"$ref": "#/$defs/PlainTextContentBlock"}, {"$ref": "#/$defs/FileContentBlock"}, {"$ref": "#/$defs/CodeInterpreterCall"}, {"$ref": "#/$defs/CodeInterpreterOutput"}, {"$ref": "#/$defs/CodeInterpreterResult"}, {"$ref": "#/$defs/WebSearchCall"}, {"$ref": "#/$defs/WebSearchResult"}]}, "title": "Content", "type": "array"}, "usage_metadata": {"anyOf": [{"$ref": "#/$defs/UsageMetadata"}, {"type": "null"}], "default": null}, "response_metadata": {"$ref": "#/$defs/ResponseMetadata"}, "parsed": {"anyOf": [{"additionalProperties": true, "type": "object"}, {"$ref": "#/$defs/BaseModel"}, {"type": "null"}], "default": null, "title": "Parsed"}}, "title": "AIMessageChunk", "type": "object"}, "AudioContentBlock": {"description": "Audio data.\\n\\n.. note::\\n    ``create_audio_block`` may also be used as a factory to create an\\n    ``AudioContentBlock``. Benefits include:\\n\\n    * Automatic ID generation (when not provided)\\n    * Required arguments strictly validated at creation time", "properties": {"type": {"const": "audio", "title": "Type", "type": "string"}, "id": {"title": "Id", "type": "string"}, "file_id": {"title": "File Id", "type": "string"}, "mime_type": {"title": "Mime Type", "type": "string"}, "index": {"title": "Index", "type": "integer"}, "url": {"title": "Url", "type": "string"}, "base64": {"title": "Base64", "type": "string"}, "extras": {"additionalProperties": true, "title": "Extras", "type": "object"}}, "required": ["type"], "title": "AudioContentBlock", "type": "object"}, "BaseMessage": {"additionalProperties": true, "description": "Base abstract message class.\\n\\nMessages are the inputs and outputs of ChatModels.", "properties": {"content": {"anyOf": [{"type": "string"}, {"items": {"anyOf": [{"type": "string"}, {"additionalProperties": true, "type": "object"}]}, "type": "array"}], "title": "Content"}, "additional_kwargs": {"additionalProperties": true, "title": "Additional Kwargs", "type": "object"}, "response_metadata": {"additionalProperties": true, "title": "Response Metadata", "type": "object"}, "type": {"title": "Type", "type": "string"}, "name": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Name"}, "id": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Id"}}, "required": ["content", "type"], "title": "BaseMessage", "type": "object"}, "BaseModel": {"properties": {}, "title": "BaseModel", "type": "object"}, "Citation": {"description": "Annotation for citing data from a document.\\n\\n.. note::\\n    ``start/end`` indices refer to the **response text**,\\n    not the source text. This means that the indices are relative to the model\'s\\n    response, not the original document (as specified in the ``url``).\\n\\n.. note::\\n    ``create_citation`` may also be used as a factory to create a ``Citation``.\\n    Benefits include:\\n\\n    * Automatic ID generation (when not provided)\\n    * Required arguments strictly validated at creation time", "properties": {"type": {"const": "citation", "title": "Type", "type": "string"}, "id": {"title": "Id", "type": "string"}, "url": {"title": "Url", "type": "string"}, "title": {"title": "Title", "type": "string"}, "start_index": {"title": "Start Index", "type": "integer"}, "end_index": {"title": "End Index", "type": "integer"}, "cited_text": {"title": "Cited Text", "type": "string"}, "extras": {"additionalProperties": true, "title": "Extras", "type": "object"}}, "required": ["type"], "title": "Citation", "type": "object"}, "CodeInterpreterCall": {"description": "Built-in code interpreter tool call.", "properties": {"type": {"const": "code_interpreter_call", "title": "Type", "type": "string"}, "id": {"title": "Id", "type": "string"}, "language": {"title": "Language", "type": "string"}, "code": {"title": "Code", "type": "string"}, "index": {"title": "Index", "type": "integer"}, "extras": {"additionalProperties": true, "title": "Extras", "type": "object"}}, "required": ["type"], "title": "CodeInterpreterCall", "type": "object"}, "CodeInterpreterOutput": {"description": "Output of a singular code interpreter tool call.\\n\\nFull output of a code interpreter tool call is represented by\\n``CodeInterpreterResult`` which is a list of these blocks.", "properties": {"type": {"const": "code_interpreter_output", "title": "Type", "type": "string"}, "id": {"title": "Id", "type": "string"}, "return_code": {"title": "Return Code", "type": "integer"}, "stderr": {"title": "Stderr", "type": "string"}, "stdout": {"title": "Stdout", "type": "string"}, "file_ids": {"items": {"type": "string"}, "title": "File Ids", "type": "array"}, "index": {"title": "Index", "type": "integer"}, "extras": {"additionalProperties": true, "title": "Extras", "type": "object"}}, "required": ["type"], "title": "CodeInterpreterOutput", "type": "object"}, "CodeInterpreterResult": {"description": "Result of a code interpreter tool call.", "properties": {"type": {"const": "code_interpreter_result", "title": "Type", "type": "string"}, "id": {"title": "Id", "type": "string"}, "output": {"items": {"$ref": "#/$defs/CodeInterpreterOutput"}, "title": "Output", "type": "array"}, "index": {"title": "Index", "type": "integer"}, "extras": {"additionalProperties": true, "title": "Extras", "type": "object"}}, "required": ["type", "output"], "title": "CodeInterpreterResult", "type": "object"}, "FileContentBlock": {"description": "File data that doesn\'t fit into other multimodal blocks.\\n\\nThis block is intended for files that are not images, audio, or plaintext. For\\nexample, it can be used for PDFs, Word documents, etc.\\n\\nIf the file is an image, audio, or plaintext, you should use the corresponding\\ncontent block type (e.g., ``ImageContentBlock``, ``AudioContentBlock``,\\n``PlainTextContentBlock``).\\n\\n.. note::\\n    ``create_file_block`` may also be used as a factory to create a\\n    ``FileContentBlock``. Benefits include:\\n\\n    * Automatic ID generation (when not provided)\\n    * Required arguments strictly validated at creation time", "properties": {"type": {"const": "file", "title": "Type", "type": "string"}, "id": {"title": "Id", "type": "string"}, "file_id": {"title": "File Id", "type": "string"}, "mime_type": {"title": "Mime Type", "type": "string"}, "index": {"title": "Index", "type": "integer"}, "url": {"title": "Url", "type": "string"}, "base64": {"title": "Base64", "type": "string"}, "extras": {"additionalProperties": true, "title": "Extras", "type": "object"}}, "required": ["type"], "title": "FileContentBlock", "type": "object"}, "HumanMessage": {"properties": {"id": {"title": "Id", "type": "string"}, "content": {"items": {"anyOf": [{"$ref": "#/$defs/TextContentBlock"}, {"$ref": "#/$defs/ToolCall"}, {"$ref": "#/$defs/InvalidToolCall"}, {"$ref": "#/$defs/ToolCallChunk"}, {"$ref": "#/$defs/ReasoningContentBlock"}, {"$ref": "#/$defs/NonStandardContentBlock"}, {"$ref": "#/$defs/ImageContentBlock"}, {"$ref": "#/$defs/VideoContentBlock"}, {"$ref": "#/$defs/AudioContentBlock"}, {"$ref": "#/$defs/PlainTextContentBlock"}, {"$ref": "#/$defs/FileContentBlock"}, {"$ref": "#/$defs/CodeInterpreterCall"}, {"$ref": "#/$defs/CodeInterpreterOutput"}, {"$ref": "#/$defs/CodeInterpreterResult"}, {"$ref": "#/$defs/WebSearchCall"}, {"$ref": "#/$defs/WebSearchResult"}]}, "title": "Content", "type": "array"}, "type": {"const": "human", "default": "human", "title": "Type", "type": "string"}, "name": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Name"}}, "required": ["id", "content"], "title": "HumanMessage", "type": "object"}, "ImageContentBlock": {"description": "Image data.\\n\\n.. note::\\n    ``create_image_block`` may also be used as a factory to create a\\n    ``ImageContentBlock``. Benefits include:\\n\\n    * Automatic ID generation (when not provided)\\n    * Required arguments strictly validated at creation time", "properties": {"type": {"const": "image", "title": "Type", "type": "string"}, "id": {"title": "Id", "type": "string"}, "file_id": {"title": "File Id", "type": "string"}, "mime_type": {"title": "Mime Type", "type": "string"}, "index": {"title": "Index", "type": "integer"}, "url": {"title": "Url", "type": "string"}, "base64": {"title": "Base64", "type": "string"}, "extras": {"additionalProperties": true, "title": "Extras", "type": "object"}}, "required": ["type"], "title": "ImageContentBlock", "type": "object"}, "InputTokenDetails": {"description": "Breakdown of input token counts.\\n\\nDoes *not* need to sum to full input token count. Does *not* need to have all keys.\\n\\nExample:\\n\\n    .. code-block:: python\\n\\n        {\\n            \\"audio\\": 10,\\n            \\"cache_creation\\": 200,\\n            \\"cache_read\\": 100,\\n        }\\n\\n.. versionadded:: 0.3.9\\n\\nMay also hold extra provider-specific keys.", "properties": {"audio": {"title": "Audio", "type": "integer"}, "cache_creation": {"title": "Cache Creation", "type": "integer"}, "cache_read": {"title": "Cache Read", "type": "integer"}}, "title": "InputTokenDetails", "type": "object"}, "InvalidToolCall": {"description": "Allowance for errors made by LLM.\\n\\nHere we add an ``error`` key to surface errors made during generation\\n(e.g., invalid JSON arguments.)", "properties": {"type": {"const": "invalid_tool_call", "title": "Type", "type": "string"}, "id": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Id"}, "name": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Name"}, "args": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Args"}, "error": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Error"}, "index": {"title": "Index", "type": "integer"}, "extras": {"additionalProperties": true, "title": "Extras", "type": "object"}}, "required": ["type", "id", "name", "args", "error"], "title": "InvalidToolCall", "type": "object"}, "NonStandardAnnotation": {"description": "Provider-specific annotation format.", "properties": {"type": {"const": "non_standard_annotation", "title": "Type", "type": "string"}, "id": {"title": "Id", "type": "string"}, "value": {"additionalProperties": true, "title": "Value", "type": "object"}}, "required": ["type", "value"], "title": "NonStandardAnnotation", "type": "object"}, "NonStandardContentBlock": {"description": "Provider-specific data.\\n\\nThis block contains data for which there is not yet a standard type.\\n\\nThe purpose of this block should be to simply hold a provider-specific payload.\\nIf a provider\'s non-standard output includes reasoning and tool calls, it should be\\nthe adapter\'s job to parse that payload and emit the corresponding standard\\nReasoningContentBlock and ToolCallContentBlocks.\\n\\n.. note::\\n    ``create_non_standard_block`` may also be used as a factory to create a\\n    ``NonStandardContentBlock``. Benefits include:\\n\\n    * Automatic ID generation (when not provided)\\n    * Required arguments strictly validated at creation time", "properties": {"type": {"const": "non_standard", "title": "Type", "type": "string"}, "id": {"title": "Id", "type": "string"}, "value": {"additionalProperties": true, "title": "Value", "type": "object"}, "index": {"title": "Index", "type": "integer"}}, "required": ["type", "value"], "title": "NonStandardContentBlock", "type": "object"}, "OutputTokenDetails": {"description": "Breakdown of output token counts.\\n\\nDoes *not* need to sum to full output token count. Does *not* need to have all keys.\\n\\nExample:\\n\\n    .. code-block:: python\\n\\n        {\\n            \\"audio\\": 10,\\n            \\"reasoning\\": 200,\\n        }\\n\\n.. versionadded:: 0.3.9", "properties": {"audio": {"title": "Audio", "type": "integer"}, "reasoning": {"title": "Reasoning", "type": "integer"}}, "title": "OutputTokenDetails", "type": "object"}, "PlainTextContentBlock": {"description": "Plaintext data (e.g., from a document).\\n\\n.. note::\\n    Title and context are optional fields that may be passed to the model. See\\n    Anthropic `example <https://docs.anthropic.com/en/docs/build-with-claude/citations#citable-vs-non-citable-content>`__.\\n\\n.. note::\\n    ``create_plaintext_block`` may also be used as a factory to create a\\n    ``PlainTextContentBlock``. Benefits include:\\n\\n    * Automatic ID generation (when not provided)\\n    * Required arguments strictly validated at creation time", "properties": {"type": {"const": "text-plain", "title": "Type", "type": "string"}, "id": {"title": "Id", "type": "string"}, "file_id": {"title": "File Id", "type": "string"}, "mime_type": {"const": "text/plain", "title": "Mime Type", "type": "string"}, "index": {"title": "Index", "type": "integer"}, "url": {"title": "Url", "type": "string"}, "base64": {"title": "Base64", "type": "string"}, "text": {"title": "Text", "type": "string"}, "title": {"title": "Title", "type": "string"}, "context": {"title": "Context", "type": "string"}, "extras": {"additionalProperties": true, "title": "Extras", "type": "object"}}, "required": ["type", "mime_type"], "title": "PlainTextContentBlock", "type": "object"}, "ReasoningContentBlock": {"description": "Reasoning output from a LLM.\\n\\n.. note::\\n    ``create_reasoning_block`` may also be used as a factory to create a\\n    ``ReasoningContentBlock``. Benefits include:\\n\\n    * Automatic ID generation (when not provided)\\n    * Required arguments strictly validated at creation time", "properties": {"type": {"const": "reasoning", "title": "Type", "type": "string"}, "id": {"title": "Id", "type": "string"}, "reasoning": {"title": "Reasoning", "type": "string"}, "index": {"title": "Index", "type": "integer"}, "extras": {"additionalProperties": true, "title": "Extras", "type": "object"}}, "required": ["type"], "title": "ReasoningContentBlock", "type": "object"}, "ResponseMetadata": {"description": "Metadata about the response from the AI provider.\\n\\nContains additional information returned by the provider, such as\\nresponse headers, service tiers, log probabilities, system fingerprints, etc.\\n\\nExtra keys are permitted from what is typed here (via `total=False`), allowing\\nfor provider-specific metadata to be included without breaking the type\\ndefinition.", "properties": {"model_provider": {"title": "Model Provider", "type": "string"}, "model_name": {"title": "Model Name", "type": "string"}}, "title": "ResponseMetadata", "type": "object"}, "SystemMessage": {"properties": {"id": {"title": "Id", "type": "string"}, "content": {"items": {"anyOf": [{"$ref": "#/$defs/TextContentBlock"}, {"$ref": "#/$defs/ToolCall"}, {"$ref": "#/$defs/InvalidToolCall"}, {"$ref": "#/$defs/ToolCallChunk"}, {"$ref": "#/$defs/ReasoningContentBlock"}, {"$ref": "#/$defs/NonStandardContentBlock"}, {"$ref": "#/$defs/ImageContentBlock"}, {"$ref": "#/$defs/VideoContentBlock"}, {"$ref": "#/$defs/AudioContentBlock"}, {"$ref": "#/$defs/PlainTextContentBlock"}, {"$ref": "#/$defs/FileContentBlock"}, {"$ref": "#/$defs/CodeInterpreterCall"}, {"$ref": "#/$defs/CodeInterpreterOutput"}, {"$ref": "#/$defs/CodeInterpreterResult"}, {"$ref": "#/$defs/WebSearchCall"}, {"$ref": "#/$defs/WebSearchResult"}]}, "title": "Content", "type": "array"}, "type": {"const": "system", "default": "system", "title": "Type", "type": "string"}, "name": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Name"}, "custom_role": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Custom Role"}}, "required": ["id", "content"], "title": "SystemMessage", "type": "object"}, "TextContentBlock": {"description": "Text output from a LLM.\\n\\nThis typically represents the main text content of a message, such as the response\\nfrom a language model or the text of a user message.\\n\\n.. note::\\n    ``create_text_block`` may also be used as a factory to create a\\n    ``TextContentBlock``. Benefits include:\\n\\n    * Automatic ID generation (when not provided)\\n    * Required arguments strictly validated at creation time", "properties": {"type": {"const": "text", "title": "Type", "type": "string"}, "id": {"title": "Id", "type": "string"}, "text": {"title": "Text", "type": "string"}, "annotations": {"items": {"anyOf": [{"$ref": "#/$defs/Citation"}, {"$ref": "#/$defs/NonStandardAnnotation"}]}, "title": "Annotations", "type": "array"}, "index": {"title": "Index", "type": "integer"}, "extras": {"additionalProperties": true, "title": "Extras", "type": "object"}}, "required": ["type", "text"], "title": "TextContentBlock", "type": "object"}, "ToolCall": {"description": "Represents a request to call a tool.\\n\\nExample:\\n\\n    .. code-block:: python\\n\\n        {\\n            \\"name\\": \\"foo\\",\\n            \\"args\\": {\\"a\\": 1},\\n            \\"id\\": \\"123\\"\\n        }\\n\\n    This represents a request to call the tool named \\"foo\\" with arguments {\\"a\\": 1}\\n    and an identifier of \\"123\\".\\n\\n.. note::\\n    ``create_tool_call`` may also be used as a factory to create a\\n    ``ToolCall``. Benefits include:\\n\\n    * Automatic ID generation (when not provided)\\n    * Required arguments strictly validated at creation time", "properties": {"type": {"const": "tool_call", "title": "Type", "type": "string"}, "id": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Id"}, "name": {"title": "Name", "type": "string"}, "args": {"additionalProperties": true, "title": "Args", "type": "object"}, "index": {"title": "Index", "type": "integer"}, "extras": {"additionalProperties": true, "title": "Extras", "type": "object"}}, "required": ["type", "id", "name", "args"], "title": "ToolCall", "type": "object"}, "ToolCallChunk": {"description": "A chunk of a tool call (e.g., as part of a stream).\\n\\nWhen merging ToolCallChunks (e.g., via ``AIMessageChunk.__add__``),\\nall string attributes are concatenated. Chunks are only merged if their\\nvalues of ``index`` are equal and not ``None``.\\n\\nExample:\\n\\n.. code-block:: python\\n\\n    left_chunks = [ToolCallChunk(name=\\"foo\\", args=\'{\\"a\\":\', index=0)]\\n    right_chunks = [ToolCallChunk(name=None, args=\'1}\', index=0)]\\n\\n    (\\n        AIMessageChunk(content=\\"\\", tool_call_chunks=left_chunks)\\n        + AIMessageChunk(content=\\"\\", tool_call_chunks=right_chunks)\\n    ).tool_call_chunks == [ToolCallChunk(name=\'foo\', args=\'{\\"a\\":1}\', index=0)]", "properties": {"type": {"const": "tool_call_chunk", "title": "Type", "type": "string"}, "id": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Id"}, "name": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Name"}, "args": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Args"}, "index": {"anyOf": [{"type": "integer"}, {"type": "null"}], "title": "Index"}, "extras": {"additionalProperties": true, "title": "Extras", "type": "object"}}, "required": ["id", "name", "args", "index"], "title": "ToolCallChunk", "type": "object"}, "ToolMessage": {"properties": {"id": {"title": "Id", "type": "string"}, "tool_call_id": {"title": "Tool Call Id", "type": "string"}, "content": {"items": {"anyOf": [{"$ref": "#/$defs/TextContentBlock"}, {"$ref": "#/$defs/ToolCall"}, {"$ref": "#/$defs/InvalidToolCall"}, {"$ref": "#/$defs/ToolCallChunk"}, {"$ref": "#/$defs/ReasoningContentBlock"}, {"$ref": "#/$defs/NonStandardContentBlock"}, {"$ref": "#/$defs/ImageContentBlock"}, {"$ref": "#/$defs/VideoContentBlock"}, {"$ref": "#/$defs/AudioContentBlock"}, {"$ref": "#/$defs/PlainTextContentBlock"}, {"$ref": "#/$defs/FileContentBlock"}, {"$ref": "#/$defs/CodeInterpreterCall"}, {"$ref": "#/$defs/CodeInterpreterOutput"}, {"$ref": "#/$defs/CodeInterpreterResult"}, {"$ref": "#/$defs/WebSearchCall"}, {"$ref": "#/$defs/WebSearchResult"}]}, "title": "Content", "type": "array"}, "type": {"const": "tool", "default": "tool", "title": "Type", "type": "string"}, "artifact": {"anyOf": [{}, {"type": "null"}], "default": null, "title": "Artifact"}, "name": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Name"}, "status": {"default": "success", "enum": ["success", "error"], "title": "Status", "type": "string"}}, "required": ["id", "tool_call_id", "content"], "title": "ToolMessage", "type": "object"}, "UsageMetadata": {"description": "Usage metadata for a message, such as token counts.\\n\\nThis is a standard representation of token usage that is consistent across models.\\n\\nExample:\\n\\n    .. code-block:: python\\n\\n        {\\n            \\"input_tokens\\": 350,\\n            \\"output_tokens\\": 240,\\n            \\"total_tokens\\": 590,\\n            \\"input_token_details\\": {\\n                \\"audio\\": 10,\\n                \\"cache_creation\\": 200,\\n                \\"cache_read\\": 100,\\n            },\\n            \\"output_token_details\\": {\\n                \\"audio\\": 10,\\n                \\"reasoning\\": 200,\\n            }\\n        }\\n\\n.. versionchanged:: 0.3.9\\n\\n    Added ``input_token_details`` and ``output_token_details``.", "properties": {"input_tokens": {"title": "Input Tokens", "type": "integer"}, "output_tokens": {"title": "Output Tokens", "type": "integer"}, "total_tokens": {"title": "Total Tokens", "type": "integer"}, "input_token_details": {"$ref": "#/$defs/InputTokenDetails"}, "output_token_details": {"$ref": "#/$defs/OutputTokenDetails"}}, "required": ["input_tokens", "output_tokens", "total_tokens"], "title": "UsageMetadata", "type": "object"}, "VideoContentBlock": {"description": "Video data.\\n\\n.. note::\\n    ``create_video_block`` may also be used as a factory to create a\\n    ``VideoContentBlock``. Benefits include:\\n\\n    * Automatic ID generation (when not provided)\\n    * Required arguments strictly validated at creation time", "properties": {"type": {"const": "video", "title": "Type", "type": "string"}, "id": {"title": "Id", "type": "string"}, "file_id": {"title": "File Id", "type": "string"}, "mime_type": {"title": "Mime Type", "type": "string"}, "index": {"title": "Index", "type": "integer"}, "url": {"title": "Url", "type": "string"}, "base64": {"title": "Base64", "type": "string"}, "extras": {"additionalProperties": true, "title": "Extras", "type": "object"}}, "required": ["type"], "title": "VideoContentBlock", "type": "object"}, "WebSearchCall": {"description": "Built-in web search tool call.", "properties": {"type": {"const": "web_search_call", "title": "Type", "type": "string"}, "id": {"title": "Id", "type": "string"}, "query": {"title": "Query", "type": "string"}, "index": {"title": "Index", "type": "integer"}, "extras": {"additionalProperties": true, "title": "Extras", "type": "object"}}, "required": ["type"], "title": "WebSearchCall", "type": "object"}, "WebSearchResult": {"description": "Result of a built-in web search tool call.", "properties": {"type": {"const": "web_search_result", "title": "Type", "type": "string"}, "id": {"title": "Id", "type": "string"}, "urls": {"items": {"type": "string"}, "title": "Urls", "type": "array"}, "index": {"title": "Index", "type": "integer"}, "extras": {"additionalProperties": true, "title": "Extras", "type": "object"}}, "required": ["type"], "title": "WebSearchResult", "type": "object"}}, "description": "The state of the agent.", "properties": {"messages": {"items": {"anyOf": [{"$ref": "#/$defs/BaseMessage"}, {"$ref": "#/$defs/AIMessage"}, {"$ref": "#/$defs/AIMessageChunk"}, {"$ref": "#/$defs/HumanMessage"}, {"$ref": "#/$defs/SystemMessage"}, {"$ref": "#/$defs/ToolMessage"}]}, "title": "Messages", "type": "array"}, "remaining_steps": {"title": "Remaining Steps", "type": "integer"}}, "required": ["messages"], "title": "AgentState", "type": "object"}'
# ---
# name: test_prebuilt_tool_chat.2
  '''
  {
    "nodes": [
      {
        "id": "__start__",
        "type": "runnable",
        "data": {
          "id": [
            "langgraph",
            "_internal",
            "_runnable",
            "RunnableCallable"
          ],
          "name": "__start__"
        }
      },
      {
        "id": "agent",
        "type": "runnable",
        "data": {
          "id": [
            "langgraph",
            "_internal",
            "_runnable",
            "RunnableCallable"
          ],
          "name": "agent"
        }
      },
      {
        "id": "tools",
        "type": "runnable",
        "data": {
          "id": [
            "langgraph",
            "prebuilt",
            "tool_node",
            "ToolNode"
          ],
          "name": "tools"
        }
      },
      {
        "id": "__end__"
      }
    ],
    "edges": [
      {
        "source": "__start__",
        "target": "agent"
      },
      {
        "source": "agent",
        "target": "__end__",
        "conditional": true
      },
      {
        "source": "agent",
        "target": "tools",
        "conditional": true
      },
      {
        "source": "tools",
        "target": "agent"
      }
    ]
  }
  '''
# ---
# name: test_prebuilt_tool_chat.3
  '''
  graph TD;
  	__start__ --> agent;
  	agent -.-> __end__;
  	agent -.-> tools;
  	tools --> agent;
  
  '''
# ---
# name: test_send_react_interrupt_control[memory]
  '''
  ---
  config:
    flowchart:
      curve: linear
  ---
  graph TD;
  	__start__([<p>__start__</p>]):::first
  	agent(agent)
  	foo(foo)
  	__end__([<p>__end__</p>]):::last
  	__start__ --> agent;
  	agent -.-> foo;
  	foo --> __end__;
  	classDef default fill:#f2f0ff,line-height:1.2
  	classDef first fill-opacity:0
  	classDef last fill:#bfb6fc
  
  '''
# ---
# name: test_weather_subgraph[memory]
  '''
  ---
  config:
    flowchart:
      curve: linear
  ---
  graph TD;
  	__start__([<p>__start__</p>]):::first
  	router_node(router_node)
  	normal_llm_node(normal_llm_node)
  	__end__([<p>__end__</p>]):::last
  	__start__ --> router_node;
  	router_node -.-> normal_llm_node;
  	router_node -.-> weather_graph_model_node;
  	normal_llm_node --> __end__;
  	weather_graph_weather_node --> __end__;
  	subgraph weather_graph
  	weather_graph_model_node(model_node)
  	weather_graph_weather_node(weather_node<hr/><small><em>__interrupt = before</em></small>)
  	weather_graph_model_node --> weather_graph_weather_node;
  	end
  	classDef default fill:#f2f0ff,line-height:1.2
  	classDef first fill-opacity:0
  	classDef last fill:#bfb6fc
  
  '''
# ---
